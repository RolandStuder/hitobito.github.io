/*!
 * jquery.lightbox.js
 * https://github.com/duncanmcdougall/Responsive-Lightbox
 * Copyright 2013 Duncan McDougall and other contributors; @license Creative Commons Attribution 2.5
 *
 * Options: 
 * margin - int - default 50. Minimum margin around the image
 * nav - bool - default true. enable navigation
 * blur - bool - default true. Blur other content when open using css filter
 * minSize - int - default 0. Min window width or height to open lightbox. Below threshold will open image in a new tab.
 * closeButtonText - string - default 'Close'
 * nextButtonText - string - default 'Next'
 * prevButtonText - string - default 'Next'
 *
 */
(function(e){"use strict";e.fn.lightbox=function(t){var i={margin:50,nav:!0,blur:!0,minSize:0,closeButtonText:"Close",nextButtonText:"Next",previousButtonText:"Previous"},n={items:[],lightbox:null,image:null,current:null,locked:!1,init:function(t){n.items=t,n.lightbox||(e("body").append('<div id="lightbox" style="display:none;"><a href="#" class="lightbox-close">'+i.closeButtonText+"</a>"+'<div class="lightbox-nav">'+'<a href="#" class="lightbox-previous">'+i.previousButtonText+"</a>"+'<a href="#" class="lightbox-next">'+i.nextButtonText+"</a>"+"</div>"+"</div>"),n.lightbox=e("#lightbox")),n.items.length>1&&i.nav?e(".lightbox-nav",n.lightbox).show():e(".lightbox-nav",n.lightbox).hide(),n.bindEvents()},loadImage:function(){i.blur&&e("body").addClass("blurred"),e("img",n.lightbox).remove(),n.lightbox.fadeIn("fast").append('<span class="lightbox-loading"></span>');var t=e('<img src="'+e(n.current).attr("href")+'" draggable="false">');e(t).load(function(){e(".lightbox-loading").remove(),n.lightbox.append(t),n.image=e("img",n.lightbox),n.image.hide(),n.resizeImage()})},resizeImage:function(){var t,o,l,r,g;o=e(window).height()-i.margin,l=e(window).outerWidth(!0)-i.margin,n.image.width(""),n.image.height(""),r=n.image.height(),g=n.image.width(),g>l&&(t=l/g,g=l,r=Math.round(r*t)),r>o&&(t=o/r,r=o,g=Math.round(g*t)),n.image.width(g).height(r),n.image.css({top:(e(window).height()-n.image.outerHeight())/2+"px",left:(e(window).width()-n.image.outerWidth())/2+"px"}),n.image.show(),n.locked=!1},getCurrentIndex:function(){return e.inArray(n.current,n.items)},next:function(){return n.locked?!1:(n.locked=!0,n.getCurrentIndex()>=n.items.length-1?e(n.items[0]).click():e(n.items[n.getCurrentIndex()+1]).click(),void 0)},previous:function(){return n.locked?!1:(n.locked=!0,0>=n.getCurrentIndex()?e(n.items[n.items.length-1]).click():e(n.items[n.getCurrentIndex()-1]).click(),void 0)},bindEvents:function(){e(n.items).click(function(t){if(!e("#lightbox").is(":visible")&&(e(window).width()<i.minSize||e(window).height()<i.minSize))return e(this).attr("target","_blank"),void 0;var o=e(this)[0];t.preventDefault(),n.current=o,n.loadImage(),e(document).on("keydown",function(e){27===e.keyCode&&n.close(),39===e.keyCode&&n.next(),37===e.keyCode&&n.previous()})}),n.lightbox.on("click",function(e){this===e.target&&n.close()}),e(n.lightbox).on("click",".lightbox-previous",function(){return n.previous(),!1}),e(n.lightbox).on("click",".lightbox-next",function(){return n.next(),!1}),e(n.lightbox).on("click",".lightbox-close",function(){return n.close(),!1}),e(window).resize(function(){n.image&&n.resizeImage()})},close:function(){e(document).off("keydown"),e("#lightbox").fadeOut("fast",function(){}),e("body").removeClass("blurred")}};e.extend(i,t),n.init(this)}})(jQuery);